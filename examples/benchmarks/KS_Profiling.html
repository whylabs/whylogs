<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

<meta property="og:title" content="Benchmark - KS Test" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://whylogs.readthedocs.io/examples/benchmarks/KS_Profiling.html" />
  
<meta property="og:description" content="🚩 Create a free WhyLabs account to get more value out of whylogs! Did you know you can store, visualize, and monitor whylogs profiles with the WhyLabs Observability Platform? Sign up for a free Why..." />
  <link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" />

    <meta name="generator" content="sphinx-4.3.2, furo 2022.09.29"/>
        <title>Benchmark - KS Test - whylogs v1.3.8</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f0f0f0;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #263238;
  --color-code-foreground: #EEFFFF;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #263238;
  --color-code-foreground: #EEFFFF;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<div class="announcement">
  <aside class="announcement-content">
     <em>whylogs v1</em> has been launched! Make sure you checkout the
    <a href="/en/latest/migration/basics.html" alt="Link to migration guide">the migration guide</a> to ensure a smooth
    transition 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand"><div class='hidden'>whylogs</div>  <div class='version'> v1.3.8</div></div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../_static/images/logo.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../_static/images/logo.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text"><div class='hidden'>whylogs</div>  <div class='version'> v1.3.8</div></span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/Getting_Started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../features/profiling.html">Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features/writing.html">Writers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features/data_validation.html">Data Validation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../datasets.html">Datasets</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../datasets/weather.html">Weather Forecast Dataset</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../datasets/weather.html">Weather Forecast Dataset - Usage Example</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../datasets/ecommerce.html">Ecommerce Dataset</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../datasets/ecommerce.html">Ecommerce Dataset - Usage Example</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../datasets/employee.html">Employee Dataset</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../datasets/employee.html">Employee Dataset - Usage Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Migration Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../migration/basics.html">Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration/log_rotation.html">Log Rotation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../support/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/faqs.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/usage_statistics.html">Usage Statistics</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/whylabs/whylogs/releases">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/whylabs/whylogs/issues/new/choose">Feedback</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/whylabs/whylogs">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://bit.ly/whylogs-slack">Slack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../api/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../api/whylogs/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/whylogs/api/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/api/fugue/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.fugue</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/fugue/profiler/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.fugue.profiler</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/fugue/registry/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.fugue.registry</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/api/logger/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.logger</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../../api/whylogs/api/logger/events/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.logger.events</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/api/logger/events/event/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.logger.events.event</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/api/logger/events/file_name/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.logger.events.file_name</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/logger/logger/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.logger.logger</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/logger/result_set/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.logger.result_set</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/logger/rolling/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.logger.rolling</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/logger/segment_cache/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.logger.segment_cache</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/logger/segment_processing/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.logger.segment_processing</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/logger/transient/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.logger.transient</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/api/reader/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.reader</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/reader/local/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.reader.local</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/reader/reader/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.reader.reader</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/reader/s3/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.reader.s3</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/api/store/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.store</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/store/local_store/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.store.local_store</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/store/profile_store/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.store.profile_store</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/store/query/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.store.query</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/store/sqlite_store/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.store.sqlite_store</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/api/usage_stats/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.usage_stats</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/api/whylabs/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.whylabs</span></code></a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/api/writer/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.writer</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/writer/gcs/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.writer.gcs</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/writer/local/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.writer.local</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/writer/mlflow/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.writer.mlflow</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/writer/s3/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.writer.s3</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/writer/whylabs/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.writer.whylabs</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/api/writer/writer/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.writer.writer</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/api/annotations/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.api.annotations</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/whylogs/context/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.context</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/context/environ/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.context.environ</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/context/version/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.context.version</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/whylogs/core/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/core/constraints/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.constraints</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../../api/whylogs/core/constraints/factories/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.constraints.factories</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/core/constraints/factories/cardinality_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.constraints.factories.cardinality_metrics</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/core/constraints/factories/condition_counts/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.constraints.factories.condition_counts</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/core/constraints/factories/count_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.constraints.factories.count_metrics</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/core/constraints/factories/distribution_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.constraints.factories.distribution_metrics</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/core/constraints/factories/frequent_items/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.constraints.factories.frequent_items</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/core/constraints/factories/multi_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.constraints.factories.multi_metrics</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/core/constraints/factories/types_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.constraints.factories.types_metrics</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/constraints/metric_constraints/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.constraints.metric_constraints</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/core/metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/aggregators/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.aggregators</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/column_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.column_metrics</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/compound_metric/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.compound_metric</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/condition_count_metric/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.condition_count_metric</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/decorators/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.decorators</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/deserializers/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.deserializers</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/maths/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.maths</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/metric_components/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.metric_components</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.metrics</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/multimetric/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.multimetric</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/serializers/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.serializers</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/metrics/unicode_range/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metrics.unicode_range</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/core/model_performance_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.model_performance_metrics</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/model_performance_metrics/confusion_matrix/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.model_performance_metrics.confusion_matrix</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/model_performance_metrics/model_performance_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.model_performance_metrics.model_performance_metrics</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/model_performance_metrics/regression_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.model_performance_metrics.regression_metrics</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/core/proto/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.proto</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../../api/whylogs/core/proto/v0/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.proto.v0</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/core/proto/v0/v0_constraints_pb2/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.proto.v0.v0_constraints_pb2</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/core/proto/v0/v0_messages_pb2/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.proto.v0.v0_messages_pb2</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../api/whylogs/core/proto/v0/v0_summaries_pb2/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.proto.v0.v0_summaries_pb2</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/proto/whylogs_messages_pb2/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.proto.whylogs_messages_pb2</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/core/validators/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.validators</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/validators/condition_validator/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.validators.condition_validator</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/validators/validator/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.validators.validator</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/core/view/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.view</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/view/column_profile_view/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.view.column_profile_view</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/view/dataset_profile_view/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.view.dataset_profile_view</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/core/view/segmented_dataset_profile_view/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.view.segmented_dataset_profile_view</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/column_profile/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.column_profile</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/common/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.common</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/configs/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.configs</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/dataset_profile/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.dataset_profile</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/datatypes/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.datatypes</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/errors/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.errors</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/feature_weights/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.feature_weights</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/input_resolver/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.input_resolver</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/metadata/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metadata</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/metric_getters/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.metric_getters</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/predicate_parser/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.predicate_parser</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/preprocessing/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.preprocessing</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/projectors/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.projectors</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/relations/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.relations</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/resolvers/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.resolvers</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/schema/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.schema</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/segment/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.segment</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/segmentation_partition/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.segmentation_partition</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/core/specialized_resolvers/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.core.specialized_resolvers</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/whylogs/datasets/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.datasets</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/datasets/descr/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.datasets.descr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/datasets/base/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.datasets.base</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/datasets/configs/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.datasets.configs</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/datasets/ecommerce/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.datasets.ecommerce</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/datasets/employee/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.datasets.employee</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/datasets/weather/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.datasets.weather</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/whylogs/experimental/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/experimental/constraints_generation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental.constraints_generation</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/experimental/constraints_generation/condition_counts/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental.constraints_generation.condition_counts</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/experimental/constraints_generation/count_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental.constraints_generation.count_metrics</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/experimental/constraints_generation/distribution_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental.constraints_generation.distribution_metrics</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/experimental/constraints_generation/frequent_items/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental.constraints_generation.frequent_items</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/experimental/constraints_generation/multi_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental.constraints_generation.multi_metrics</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/experimental/constraints_generation/types_metrics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental.constraints_generation.types_metrics</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/experimental/performance_estimation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental.performance_estimation</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/experimental/performance_estimation/estimation_results/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental.performance_estimation.estimation_results</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/experimental/performance_estimation/estimators/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.experimental.performance_estimation.estimators</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/whylogs/migration/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.migration</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/migration/converters/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.migration.converters</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/migration/uncompound/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.migration.uncompound</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/whylogs/viz/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.viz</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/viz/drift/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.viz.drift</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/viz/drift/column_drift_algorithms/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.viz.drift.column_drift_algorithms</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/viz/drift/configs/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.viz.drift.configs</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/whylogs/viz/enums/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.viz.enums</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/whylogs/viz/enums/enums/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.viz.enums.enums</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/viz/extensions/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.viz.extensions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/viz/configs/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.viz.configs</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/whylogs/viz/notebook_profile_viz/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">whylogs.viz.notebook_profile_viz</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<blockquote>
<div><p class="rubric" id="create-a-free-whylabs-account-to-get-more-value-out-of-whylogs">🚩 <em>Create a free WhyLabs account to get more value out of whylogs!</em></p>
<p><em>Did you know you can store, visualize, and monitor whylogs profiles with the</em> <a class="reference external" href="https://whylabs.ai/whylogs-free-signup?utm_source=whylogs-Github&amp;utm_medium=whylogs-example&amp;utm_campaign=KS_profiling">WhyLabs Observability Platform</a><em>? Sign up for a</em> <a class="reference external" href="https://whylabs.ai/whylogs-free-signup?utm_source=whylogs-Github&amp;utm_medium=whylogs-example&amp;utm_campaign=KS_profiling">free WhyLabs account</a> <em>to leverage the power of whylogs and WhyLabs together!</em></p>
</div></blockquote>
<section id="Benchmark---KS-Test">
<h1>Benchmark - KS Test<a class="headerlink" href="#Benchmark---KS-Test" title="Permalink to this headline">#</a></h1>
<p><a class="reference external" href="https://colab.research.google.com/github/whylabs/whylogs/blob/mainline/python/examples/benchmarks/KS_Profiling.ipynb"><img alt="Open in Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
<blockquote>
<div><p>This notebook is a complement to the blog post <a class="reference external" href="https://medium.com/p/5c8317796f78">Understanding Kolmogorov-Smirnov (KS) Tests for Data Drift on Profiled Data</a>.</p>
<p>Please refer to the blog post for additional context.</p>
</div></blockquote>
<p>We applied whylogs’ implementation of KS Test and compared the results when applying the same test to the complete data set. The results allow us to discuss the limitations of data profiling for KS drift detection, and also the pros and cons of the KS algorithm itself for different scenarios.</p>
<section id="Experiment-Design">
<h2>Experiment Design<a class="headerlink" href="#Experiment-Design" title="Permalink to this headline">#</a></h2>
<p>First, we need the data. For this experiment, we will take two samples of equal size from the following distributions:</p>
<ul class="simple">
<li><p>Normal: Broad class of data. Unskewed and Peaked around the center</p></li>
<li><p>Pareto: Skewed data with long tail/outliers</p></li>
<li><p>Uniform: Evenly sampled across its domain</p></li>
</ul>
<section id="Drift-Injection">
<h3>Drift Injection<a class="headerlink" href="#Drift-Injection" title="Permalink to this headline">#</a></h3>
<p>Next, we’ll inject drift into one sample (which we’ll call the target distribution) to compare it to the reference, unaltered, distribution.</p>
<p>We will inject drift artificially by simply shifting the data according to a parameter. We’ll use as the parameter a ratio of the distribution’s interquartile range.</p>
<p>The idea is to have 4 different scenarios:</p>
<ul class="simple">
<li><p>No drift</p></li>
<li><p>Small drift</p></li>
<li><p>Medium drift</p></li>
<li><p>Large drift</p></li>
</ul>
<p>The ideal process of detecting/alerting for drifts can be very subjective, depending on the desired sensitivity for your particular application. In this case, we are assuming that the small-drift scenario is small enough for it to be safely ignored. We are also expecting that the medium and large drift scenarios should result in a drift alert since both would be cases for further inspection.</p>
</section>
<section id="Applying-the-KS-test">
<h3>Applying the KS test<a class="headerlink" href="#Applying-the-KS-test" title="Permalink to this headline">#</a></h3>
<p>As the ground truth, we will use scipy’s implementation of the two-sample KS test, with the complete data from both samples. We will then compare those results with the profiled version of the test. To do so, we’ll use whylogs’ implementation of the same test, which uses only the statistical profile of each sample.</p>
<p>The distribution metrics contained in the profiles are obtained from a process called data sketching, which adds some degree of randomness to the result. For this reason, the KS test result can be different each time a profile is generated. For this reason, we’ll profile the data 10 times for every scenario, and compare the ground truth to statistics such as the mean, maximum, and minimum of those runs.</p>
</section>
<section id="Experiment-Variables">
<h3>Experiment Variables<a class="headerlink" href="#Experiment-Variables" title="Permalink to this headline">#</a></h3>
<p>Our main goal is to answer:</p>
<p>“How does whylogs’ KS implementation compare to scipy’s implementation?”</p>
<p>However, this answer depends on several different variables. We will run three separate experiments to better understand the effect of each variable: Data Volume, Number of buckets, and Profile Size. The first one relates to the number of samples being tested, whereas the last two relate to whylogs internal, tunable parameters.</p>
</section>
</section>
<section id="Installing-the-required-packages">
<h2>Installing the required packages<a class="headerlink" href="#Installing-the-required-packages" title="Permalink to this headline">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Note: you may need to restart the kernel to use updated packages.</span>
<span class="o">%</span><span class="k">pip</span> install &#39;matplotlib&#39; &#39;numpy&#39; &#39;seaborn==0.12.1&#39;
<span class="o">%</span><span class="k">pip</span> install &#39;scipy==1.7.3&#39; &#39;whylogs[viz]&#39; &#39;typing_extensions&#39;
</pre></div>
</div>
</div>
</section>
<section id="Parameters-and-Functions---Experiments-and-Plots">
<h2>Parameters and Functions - Experiments and Plots<a class="headerlink" href="#Parameters-and-Functions---Experiments-and-Plots" title="Permalink to this headline">#</a></h2>
<p>In this section, we’ll compile all of the parameter and functions required to run the following experiments and plot the results.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># For experiment #2, we&#39;re running the test with different number of buckets for the KS Test calculation</span>
<span class="n">QUANTILE_LIST</span> <span class="o">=</span> <span class="p">[</span>
    <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">)),</span>
    <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)),</span>
    <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">)),</span>
    <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)),</span>
<span class="p">]</span>

<span class="c1"># no drift, small drift, medium drift and large drift</span>
<span class="n">drift_magnitudes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.05</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mf">0.75</span><span class="p">]</span>

<span class="n">sample_sizes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">500</span><span class="p">,</span><span class="mi">1000</span><span class="p">,</span><span class="mi">5000</span><span class="p">,</span><span class="mi">10000</span><span class="p">,</span><span class="mi">50000</span><span class="p">]</span>
<span class="n">sample_sizes_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;500&#39;</span><span class="p">,</span><span class="s1">&#39;1k&#39;</span><span class="p">,</span> <span class="s1">&#39;5k&#39;</span><span class="p">,</span><span class="s1">&#39;10k&#39;</span><span class="p">,</span><span class="s1">&#39;50k&#39;</span><span class="p">]</span>
<span class="n">random_seed</span> <span class="o">=</span> <span class="mi">22</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">PCG64</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">iqr</span>

<span class="k">def</span> <span class="nf">generate_data</span><span class="p">(</span>
    <span class="n">distribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">drift_magnitude</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100000</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a pandas series with samples drawn from a distribution (normal, pareto or uniform). The internal parameters</span>
<span class="sd">    for each distributions are fixed. You can specify the number of samples you want and also if a drift of a certain magnitude is</span>
<span class="sd">    to be injected. The drift magnitude is a ratio of the distribution&#39;s interquartile range.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">generator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">generator</span> <span class="o">=</span> <span class="n">Generator</span><span class="p">(</span><span class="n">PCG64</span><span class="p">(</span><span class="mi">12345</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s2">&quot;normal&quot;</span><span class="p">:</span>
        <span class="n">sample</span> <span class="o">=</span> <span class="n">generator</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s2">&quot;pareto&quot;</span><span class="p">:</span>
        <span class="n">a</span><span class="p">,</span><span class="n">m</span> <span class="o">=</span> <span class="mf">7.</span><span class="p">,</span><span class="mf">2.</span>
        <span class="n">sample</span> <span class="o">=</span> <span class="p">(</span><span class="n">generator</span><span class="o">.</span><span class="n">pareto</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">m</span>
    <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s2">&quot;uniform&quot;</span><span class="p">:</span>
        <span class="n">sample</span> <span class="o">=</span> <span class="n">generator</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="n">size</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Distribution not found.&quot;</span><span class="p">)</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">iqr</span><span class="p">(</span><span class="n">sample</span><span class="p">))</span> <span class="o">*</span> <span class="n">drift_magnitude</span>
    <span class="n">drifted_sample</span> <span class="o">=</span> <span class="n">sample</span> <span class="o">+</span> <span class="n">offset</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">drifted_sample</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">PCG64</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">whylogs</span> <span class="k">as</span> <span class="nn">why</span>
<span class="kn">from</span> <span class="nn">whylogs.viz.utils.drift_calculations</span> <span class="kn">import</span> <span class="n">calculate_drift_values</span><span class="p">,</span> <span class="n">_compute_ks_test_p_value</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="k">def</span> <span class="nf">run_ks_experiment</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span><span class="n">drift_magnitude</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">quantile_list</span> <span class="o">=</span> <span class="n">QUANTILE_LIST</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs KS experiment for given distribution type and drift magnitude. The experiments are run</span>
<span class="sd">    for multiple sample sizes and number of buckets, 10 times for each combination of parameters.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    distribution : str, optional</span>
<span class="sd">        distribution type. &quot;normal&quot;,&quot;pareto&quot;, or &quot;uniform&quot;, by default &quot;normal&quot;</span>
<span class="sd">    drift_magnitude : int, optional</span>
<span class="sd">        drift magnitude, by default 0 (no drift)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    _type_</span>
<span class="sd">        Dictionary with statistics such as pvalues for whylogs and scipy&#39;s implementation, mean absolute errors,</span>
<span class="sd">        and error ranges (minimum and maximum) for whylogs KS test.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># size_list = [1000, 5000, 10000, 50000, 100000]</span>
    <span class="n">size_list</span> <span class="o">=</span> <span class="n">sample_sizes</span>
    <span class="n">experiment_results</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">quant_i</span><span class="p">,</span><span class="n">QUANTILES</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">quantile_list</span><span class="p">):</span>
        <span class="n">bars1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">heights1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pv_means</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pv_ranges</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pv_truths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sample_size</span> <span class="ow">in</span> <span class="n">size_list</span><span class="p">:</span>
            <span class="n">rng</span> <span class="o">=</span> <span class="n">Generator</span><span class="p">(</span><span class="n">PCG64</span><span class="p">(</span><span class="n">random_seed</span><span class="p">))</span>
            <span class="n">ref</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(),</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">ref</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generate_data</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="n">rng</span><span class="p">,</span> <span class="n">drift_magnitude</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">)</span>
            <span class="n">target</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generate_data</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="n">rng</span><span class="p">,</span> <span class="n">drift_magnitude</span><span class="o">=</span><span class="n">drift_magnitude</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">)</span>
            <span class="n">scipy_res</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">ks_2samp</span><span class="p">(</span><span class="n">ref</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">],</span> <span class="n">target</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;asymp&#39;</span><span class="p">)</span>
            <span class="n">scipy_pvalue</span> <span class="o">=</span> <span class="n">scipy_res</span><span class="o">.</span><span class="n">pvalue</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">pvalues</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
                <span class="n">ref_profile</span> <span class="o">=</span> <span class="n">why</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span><span class="o">.</span><span class="n">profile</span><span class="p">()</span>
                <span class="n">target_profile</span> <span class="o">=</span> <span class="n">why</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">target</span><span class="p">)</span><span class="o">.</span><span class="n">profile</span><span class="p">()</span>

                <span class="n">ref_dist</span> <span class="o">=</span> <span class="n">ref_profile</span><span class="o">.</span><span class="n">_columns</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">_metrics</span><span class="p">[</span><span class="s2">&quot;distribution&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">kll</span><span class="o">.</span><span class="n">value</span>
                <span class="n">target_dist</span> <span class="o">=</span> <span class="n">target_profile</span><span class="o">.</span><span class="n">_columns</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">_metrics</span><span class="p">[</span><span class="s2">&quot;distribution&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">kll</span><span class="o">.</span><span class="n">value</span>

                <span class="n">res</span> <span class="o">=</span> <span class="n">_compute_ks_test_p_value</span><span class="p">(</span><span class="n">reference_distribution</span><span class="o">=</span><span class="n">ref_dist</span><span class="p">,</span> <span class="n">target_distribution</span><span class="o">=</span><span class="n">target_dist</span><span class="p">,</span> <span class="n">quantiles</span><span class="o">=</span><span class="n">QUANTILES</span><span class="p">)</span>
                <span class="n">pv</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&quot;p_value&quot;</span><span class="p">]</span>
                <span class="n">error</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s2">&quot;p_value&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">scipy_pvalue</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="n">pvalues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pv</span><span class="p">)</span>
            <span class="n">mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
            <span class="n">mean_pv</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">pvalues</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">pvalues</span><span class="p">)</span>

            <span class="n">range_pv</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">mean_pv</span><span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="n">pvalues</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">mean_pv</span><span class="o">-</span><span class="nb">max</span><span class="p">(</span><span class="n">pvalues</span><span class="p">))]</span>

            <span class="n">error</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">mean</span><span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="n">errors</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">mean</span><span class="o">-</span><span class="nb">max</span><span class="p">(</span><span class="n">errors</span><span class="p">))]</span>

            <span class="n">pv_truth</span> <span class="o">=</span> <span class="n">scipy_pvalue</span>
            <span class="n">pv_truths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pv_truth</span><span class="p">)</span>
            <span class="n">bars1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mean</span><span class="p">)</span>
            <span class="n">heights1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

            <span class="n">pv_means</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mean_pv</span><span class="p">)</span>
            <span class="n">pv_ranges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">range_pv</span><span class="p">)</span>

        <span class="n">y_err</span> <span class="o">=</span> <span class="p">[[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">heights1</span><span class="p">],[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">heights1</span><span class="p">]]</span>
        <span class="n">pv_rg</span> <span class="o">=</span> <span class="p">[[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pv_ranges</span><span class="p">],[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pv_ranges</span><span class="p">]]</span>

        <span class="n">experiment_results</span><span class="p">[</span><span class="n">quant_i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">experiment_results</span><span class="p">[</span><span class="n">quant_i</span><span class="p">][</span><span class="s1">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bars1</span>
        <span class="n">experiment_results</span><span class="p">[</span><span class="n">quant_i</span><span class="p">][</span><span class="s1">&#39;yerr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_err</span>
        <span class="n">experiment_results</span><span class="p">[</span><span class="n">quant_i</span><span class="p">][</span><span class="s1">&#39;pv_means&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pv_means</span>
        <span class="n">experiment_results</span><span class="p">[</span><span class="n">quant_i</span><span class="p">][</span><span class="s1">&#39;pv_ranges&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pv_rg</span>
        <span class="n">experiment_results</span><span class="p">[</span><span class="n">quant_i</span><span class="p">][</span><span class="s1">&#39;pv_truths&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pv_truths</span>
        <span class="n">experiment_results</span><span class="p">[</span><span class="n">quant_i</span><span class="p">][</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;buckets=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">QUANTILES</span><span class="p">))</span>
        <span class="n">experiment_results</span><span class="p">[</span><span class="n">quant_i</span><span class="p">][</span><span class="s1">&#39;distribution&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">distribution</span>
    <span class="k">return</span> <span class="n">experiment_results</span>

<span class="k">def</span> <span class="nf">run_experiment_on_params</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span><span class="n">magnitudes</span> <span class="o">=</span> <span class="n">drift_magnitudes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs the KS experiment for a list of different drift magnitudes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">exps_results</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">drift_magnitude</span> <span class="ow">in</span> <span class="n">magnitudes</span><span class="p">:</span>
        <span class="n">exps_results</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_ks_experiment</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span> <span class="n">drift_magnitude</span><span class="o">=</span><span class="n">drift_magnitude</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">exps_results</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">PCG64</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="k">def</span> <span class="nf">plot_drift</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span> <span class="n">magnitudes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.05</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mf">0.75</span><span class="p">],</span> <span class="n">sample_size</span> <span class="o">=</span> <span class="mi">100000</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plots 4 histograms in a 2x2 matrix for different drift magnitudes, for the given distribution type</span>
<span class="sd">    and number of samples.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">rng</span> <span class="o">=</span> <span class="n">Generator</span><span class="p">(</span><span class="n">PCG64</span><span class="p">(</span><span class="n">random_seed</span><span class="p">))</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ix</span><span class="p">,</span><span class="n">drift_magnitude</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">magnitudes</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ix</span><span class="o">%</span><span class="k">2</span>),int(ix/2)

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;ref&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generate_data</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="n">rng</span><span class="p">,</span> <span class="n">drift_magnitude</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generate_data</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="n">rng</span><span class="p">,</span> <span class="n">drift_magnitude</span><span class="o">=</span><span class="n">drift_magnitude</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">)</span>



        <span class="c1"># set a grey background (use sns.set_theme() if seaborn version 0.11.0 or above)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;darkgrid&quot;</span><span class="p">)</span>

        <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;ref&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;skyblue&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;ref&quot;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;target&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;target&quot;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ix</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">})</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Drift Size:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">drift_magnitude</span><span class="p">))</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="s2">&quot;Artificial drift injection for varying drift magnitudes for </span><span class="si">{}</span><span class="s2"> distribution. Number of samples: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">distribution</span><span class="p">,</span><span class="n">sample_size</span><span class="p">),</span>  <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_pvalues</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plots the pvalues for both whylogs and scipy&#39;s implementation for</span>
<span class="sd">    different drift magnitudes. Expects 4 different drift magnitudes to</span>
<span class="sd">    plot a 2x2 matrix.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    quant_bars_per_drift : dict</span>
<span class="sd">        Statistics previously collected by KS experiment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc_file_defaults</span><span class="p">()</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">):</span>
        <span class="n">quant_bars</span> <span class="o">=</span> <span class="n">quant_bars_per_drift</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="c1"># whylogs by default uses 100 buckets, so let&#39;s choose that</span>
        <span class="n">quant_index</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="k">2</span>),int(i/2)
        <span class="n">pv_means</span> <span class="o">=</span> <span class="n">quant_bars</span><span class="p">[</span><span class="n">quant_index</span><span class="p">][</span><span class="s1">&#39;pv_means&#39;</span><span class="p">]</span>
        <span class="n">pv_range</span> <span class="o">=</span> <span class="n">quant_bars</span><span class="p">[</span><span class="n">quant_index</span><span class="p">][</span><span class="s1">&#39;pv_ranges&#39;</span><span class="p">]</span>
        <span class="n">pv_truth</span> <span class="o">=</span> <span class="n">quant_bars</span><span class="p">[</span><span class="n">quant_index</span><span class="p">][</span><span class="s1">&#39;pv_truths&#39;</span><span class="p">]</span>


        <span class="n">r1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pv_means</span><span class="p">))</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">quant_bars</span><span class="p">[</span><span class="n">quant_index</span><span class="p">][</span><span class="s1">&#39;bar&#39;</span><span class="p">]))],</span> <span class="n">sample_sizes_labels</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">pv_means</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">pv_range</span><span class="p">,</span> <span class="n">capsize</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;whylogs&quot;</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;pvalue&#39;</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span><span class="n">pv_truth</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;scipy&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">})</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Drift Size:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>


    <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="s2">&quot;KS pvalue comparison between whylogs and scipy. K=1024, 100 buckets, </span><span class="si">{}</span><span class="s2"> distribution&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">quant_bars</span><span class="p">[</span><span class="n">quant_index</span><span class="p">][</span><span class="s1">&#39;distribution&#39;</span><span class="p">]),</span>  <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">def</span> <span class="nf">plot_buckets_experiment</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plots the mean absolute errors for different number of buckets for</span>
<span class="sd">    different drift magnitudes. Expects 4 different drift magnitudes to</span>
<span class="sd">    plot a 2x2 matrix. The errors are calculated based on the difference</span>
<span class="sd">    between whylogs&#39; and scipy&#39;s KS implementation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    quant_bars_per_drift : dict</span>
<span class="sd">        Statistics previously collected by KS experiment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc_file_defaults</span><span class="p">()</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
    <span class="n">barWidth</span> <span class="o">=</span> <span class="mf">0.17</span>
    <span class="c1"># this plots 4 subplots in a 2x2 matrix</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">drift_magnitude</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">):</span>
        <span class="n">quant_bars</span> <span class="o">=</span> <span class="n">quant_bars_per_drift</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">]</span>
        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="k">2</span>),int(i/2)


        <span class="k">for</span> <span class="n">ix</span><span class="p">,</span><span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">quant_bars</span><span class="p">):</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">quant_bars</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;bar&#39;</span><span class="p">]))</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="n">ix</span><span class="o">*</span><span class="n">barWidth</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">]</span>
            <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">quant_bars</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="n">width</span> <span class="o">=</span> <span class="n">barWidth</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">quant_bars</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;yerr&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">quant_bars</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;label&#39;</span><span class="p">])</span>

        <span class="c1"># general layout</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="n">r</span><span class="o">+</span><span class="mf">1.5</span><span class="o">*</span><span class="n">barWidth</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">quant_bars</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;bar&#39;</span><span class="p">]))],</span> <span class="n">sample_sizes_labels</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">})</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Drift Size:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">drift_magnitude</span><span class="p">))</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="s2">&quot;KS pvalue mean abs. error according to sample size for </span><span class="si">{}</span><span class="s2"> distribution and varying drift magnitudes. K=1024&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">quant_bars</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;distribution&#39;</span><span class="p">]),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>


    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">whylogs.core.resolvers</span> <span class="kn">import</span> <span class="n">Resolver</span>
<span class="kn">from</span> <span class="nn">whylogs.core.datatypes</span> <span class="kn">import</span> <span class="n">DataType</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">TypedDict</span>
<span class="kn">from</span> <span class="nn">whylogs.core.metrics</span> <span class="kn">import</span> <span class="n">StandardMetric</span>
<span class="kn">from</span> <span class="nn">whylogs.core.metrics.metrics</span> <span class="kn">import</span> <span class="n">Metric</span>
<span class="kn">import</span> <span class="nn">whylogs</span> <span class="k">as</span> <span class="nn">why</span>
<span class="kn">from</span> <span class="nn">whylogs.core</span> <span class="kn">import</span> <span class="n">DatasetSchema</span>
<span class="kn">from</span> <span class="nn">whylogs.core</span> <span class="kn">import</span> <span class="n">MetricConfig</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>


<span class="k">class</span> <span class="nc">DataFrameSize</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
    <span class="n">sample_frac</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">number_samples</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">number_bytes</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span> <span class="nc">MyCustomResolver</span><span class="p">(</span><span class="n">Resolver</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resolver that assigns DistributionMetric to every column (which is ok because we only have one numerical column).&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">why_type</span><span class="p">:</span> <span class="n">DataType</span><span class="p">,</span> <span class="n">column_schema</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Metric</span><span class="p">]:</span>
        <span class="n">metrics</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">StandardMetric</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">StandardMetric</span><span class="o">.</span><span class="n">distribution</span><span class="p">]</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Metric</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">metrics</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">zero</span><span class="p">(</span><span class="n">column_schema</span><span class="o">.</span><span class="n">cfg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

<span class="k">def</span> <span class="nf">get_parquet_size</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">frac</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the size in bytes of a serialized pandas DF</span>
<span class="sd">    in parquet format. This is only used when comparing</span>
<span class="sd">    profiling vs. sampling results.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    int</span>
<span class="sd">        number of bytes of serialized dataframe.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">DataFrameSize</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span> <span class="k">as</span> <span class="n">buffer</span><span class="p">:</span>
        <span class="n">df_sampled</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="n">frac</span><span class="p">)</span>
        <span class="n">df_sampled</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
        <span class="n">number_bytes</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
        <span class="n">sample_frac</span> <span class="o">=</span> <span class="n">frac</span>
        <span class="n">number_samples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_sampled</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">DataFrameSize</span><span class="p">(</span><span class="n">sample_frac</span><span class="o">=</span><span class="n">sample_frac</span><span class="p">,</span><span class="n">number_bytes</span><span class="o">=</span><span class="n">number_bytes</span><span class="p">,</span><span class="n">number_samples</span><span class="o">=</span><span class="n">number_samples</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">PCG64</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="k">def</span> <span class="nf">get_kll_size_map</span><span class="p">(</span><span class="n">kll_list</span><span class="p">:</span><span class="nb">list</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is just to find the proper number of samples and size in bytes to match sizes between profiles and sampled dataframes.</span>
<span class="sd">    Distribution type does not affect significantly the output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rng</span> <span class="o">=</span> <span class="n">Generator</span><span class="p">(</span><span class="n">PCG64</span><span class="p">(</span><span class="mi">42</span><span class="p">))</span>
    <span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span>
    <span class="n">sample_size</span> <span class="o">=</span> <span class="mi">100000</span>
    <span class="n">drift_magnitude</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ref</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(),</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">ref</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generate_data</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="n">rng</span><span class="p">,</span> <span class="n">drift_magnitude</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">)</span>
    <span class="n">kllSizeMap</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">kll_val</span> <span class="ow">in</span> <span class="n">kll_list</span><span class="p">:</span>
        <span class="n">ref_view</span> <span class="o">=</span> <span class="n">why</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">DatasetSchema</span><span class="p">(</span><span class="n">default_configs</span><span class="o">=</span><span class="n">MetricConfig</span><span class="p">(</span><span class="n">kll_k_large</span><span class="o">=</span><span class="n">kll_val</span><span class="p">),</span><span class="n">resolvers</span><span class="o">=</span><span class="n">MyCustomResolver</span><span class="p">()))</span><span class="o">.</span><span class="n">profile</span><span class="p">()</span><span class="o">.</span><span class="n">view</span><span class="p">()</span>
        <span class="n">ref_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ref_view</span><span class="o">.</span><span class="n">serialize</span><span class="p">())</span>
        <span class="n">closest_sample</span> <span class="o">=</span> <span class="n">DataFrameSize</span><span class="p">()</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="mi">10000000</span>
        <span class="k">for</span> <span class="n">frac</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0001</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">200</span><span class="p">)):</span>
            <span class="n">sample_size</span> <span class="o">=</span> <span class="n">get_parquet_size</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span><span class="n">frac</span><span class="o">=</span><span class="n">frac</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ref_size</span><span class="o">-</span><span class="n">sample_size</span><span class="p">[</span><span class="s2">&quot;number_bytes&quot;</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">distance</span><span class="p">:</span>
                <span class="n">closest_sample</span> <span class="o">=</span> <span class="n">sample_size</span>
                <span class="n">distance</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ref_size</span><span class="o">-</span><span class="n">sample_size</span><span class="p">[</span><span class="s2">&quot;number_bytes&quot;</span><span class="p">])</span>
        <span class="n">kllSizeMap</span><span class="p">[</span><span class="n">kll_val</span><span class="p">]</span> <span class="o">=</span> <span class="n">closest_sample</span>
    <span class="k">return</span> <span class="n">kllSizeMap</span>

<span class="n">kll_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">256</span><span class="p">,</span><span class="mi">512</span><span class="p">,</span><span class="mi">1024</span><span class="p">,</span><span class="mi">2048</span><span class="p">,</span><span class="mi">4096</span><span class="p">]</span>
<span class="n">kllSizeMap</span> <span class="o">=</span> <span class="n">get_kll_size_map</span><span class="p">(</span><span class="n">kll_list</span><span class="o">=</span><span class="n">kll_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="kn">from</span> <span class="nn">whylogs.viz.utils.drift_calculations</span> <span class="kn">import</span> <span class="n">calculate_drift_values</span>

<span class="k">def</span> <span class="nf">run_kll_experiment</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span> <span class="n">magnitudes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.05</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span> <span class="n">kllSizeMap</span><span class="p">:</span><span class="nb">dict</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs experiment on different KLL_K parameters.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    distribution : str, optional</span>
<span class="sd">        distribution type. normal, pareto or uniform, by default &quot;normal&quot;</span>
<span class="sd">    magnitudes : list, optional</span>
<span class="sd">        drift magnitudes, by default [0,0.01,0.05,0.1]</span>
<span class="sd">    kllSizeMap : dict, optional</span>
<span class="sd">        Relation between profile and sampled df for a given KLL_K, by default {}</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict</span>
<span class="sd">        Statistics such as errors and size in KB for different KLL_K parameters for profile case,</span>
<span class="sd">        and for dfs sampled on different ratios for sampling case.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kll_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kllSizeMap</span><span class="p">]</span>
    <span class="n">sample_size</span> <span class="o">=</span> <span class="mi">100000</span>
    <span class="n">kll_bars</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">drift_magnitude</span> <span class="ow">in</span> <span class="n">magnitudes</span><span class="p">:</span>
        <span class="n">rng</span> <span class="o">=</span> <span class="n">Generator</span><span class="p">(</span><span class="n">PCG64</span><span class="p">(</span><span class="n">random_seed</span><span class="p">))</span>
        <span class="n">kll_bars</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">ref</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(),</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="n">ref</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generate_data</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="n">rng</span><span class="p">,</span> <span class="n">drift_magnitude</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">)</span>
        <span class="n">target</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generate_data</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="n">rng</span><span class="p">,</span> <span class="n">drift_magnitude</span><span class="o">=</span><span class="n">drift_magnitude</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">kll_val</span> <span class="ow">in</span> <span class="n">kll_list</span><span class="p">:</span>
            <span class="n">kll_bars</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">][</span><span class="n">kll_val</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">scipy_res</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">ks_2samp</span><span class="p">(</span><span class="n">ref</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">],</span> <span class="n">target</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;asymp&#39;</span><span class="p">)</span>
            <span class="n">scipy_pvalue</span> <span class="o">=</span> <span class="n">scipy_res</span><span class="o">.</span><span class="n">pvalue</span>

            <span class="n">profiled_pvalues</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sampled_pvalues</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
                <span class="n">ref_profile</span> <span class="o">=</span> <span class="n">why</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">DatasetSchema</span><span class="p">(</span><span class="n">default_configs</span><span class="o">=</span><span class="n">MetricConfig</span><span class="p">(</span><span class="n">kll_k_large</span><span class="o">=</span><span class="n">kll_val</span><span class="p">),</span><span class="n">resolvers</span><span class="o">=</span><span class="n">MyCustomResolver</span><span class="p">()))</span><span class="o">.</span><span class="n">profile</span><span class="p">()</span>
                <span class="n">ref_view</span> <span class="o">=</span> <span class="n">ref_profile</span><span class="o">.</span><span class="n">view</span><span class="p">()</span>

                <span class="n">target_profile</span> <span class="o">=</span> <span class="n">why</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">DatasetSchema</span><span class="p">(</span><span class="n">default_configs</span><span class="o">=</span><span class="n">MetricConfig</span><span class="p">(</span><span class="n">kll_k_large</span><span class="o">=</span><span class="n">kll_val</span><span class="p">),</span><span class="n">resolvers</span><span class="o">=</span><span class="n">MyCustomResolver</span><span class="p">()))</span><span class="o">.</span><span class="n">profile</span><span class="p">()</span>
                <span class="n">target_view</span> <span class="o">=</span> <span class="n">target_profile</span><span class="o">.</span><span class="n">view</span><span class="p">()</span>

                <span class="n">profiled_pvalue</span> <span class="o">=</span> <span class="n">calculate_drift_values</span><span class="p">(</span><span class="n">target_view</span><span class="o">=</span><span class="n">target_view</span><span class="p">,</span> <span class="n">reference_view</span><span class="o">=</span><span class="n">ref_view</span><span class="p">)[</span><span class="s1">&#39;col&#39;</span><span class="p">][</span><span class="s1">&#39;p_value&#39;</span><span class="p">]</span>

                <span class="n">ref_sampled</span> <span class="o">=</span> <span class="n">ref</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="n">kllSizeMap</span><span class="p">[</span><span class="n">kll_val</span><span class="p">][</span><span class="s1">&#39;sample_frac&#39;</span><span class="p">])</span>
                <span class="n">target_sampled</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="n">kllSizeMap</span><span class="p">[</span><span class="n">kll_val</span><span class="p">][</span><span class="s1">&#39;sample_frac&#39;</span><span class="p">])</span>

                <span class="n">sampled_pvalue</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">ks_2samp</span><span class="p">(</span><span class="n">ref_sampled</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">],</span> <span class="n">target_sampled</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">],</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;asymp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">pvalue</span>

                <span class="n">profiled_pvalues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">profiled_pvalue</span><span class="p">)</span>
                <span class="n">sampled_pvalues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sampled_pvalue</span><span class="p">)</span>
            <span class="n">size_bytes</span> <span class="o">=</span> <span class="n">kllSizeMap</span><span class="p">[</span><span class="n">kll_val</span><span class="p">][</span><span class="s1">&#39;number_bytes&#39;</span><span class="p">]</span>
            <span class="n">size_kb</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_bytes</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>
            <span class="n">profile_errors</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">pv</span><span class="o">-</span><span class="n">scipy_pvalue</span><span class="p">)</span> <span class="k">for</span> <span class="n">pv</span> <span class="ow">in</span> <span class="n">profiled_pvalues</span><span class="p">]</span>
            <span class="n">sample_errors</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">pv</span><span class="o">-</span><span class="n">scipy_pvalue</span><span class="p">)</span> <span class="k">for</span> <span class="n">pv</span> <span class="ow">in</span> <span class="n">sampled_pvalues</span><span class="p">]</span>

            <span class="n">profile_mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">profile_errors</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">profile_errors</span><span class="p">)</span>
            <span class="n">sample_mean</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">sample_errors</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">sample_errors</span><span class="p">)</span>

            <span class="n">range_profile_errors</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">profile_mean</span><span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="n">profile_errors</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">profile_mean</span><span class="o">-</span><span class="nb">max</span><span class="p">(</span><span class="n">profile_errors</span><span class="p">))]</span>
            <span class="n">range_sample_errors</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">sample_mean</span><span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="n">sample_errors</span><span class="p">)),</span><span class="nb">abs</span><span class="p">(</span><span class="n">sample_mean</span><span class="o">-</span><span class="nb">max</span><span class="p">(</span><span class="n">sample_errors</span><span class="p">))]</span>

            <span class="n">kll_bars</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">][</span><span class="n">kll_val</span><span class="p">][</span><span class="s1">&#39;size_kb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">size_kb</span>
            <span class="n">kll_bars</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">][</span><span class="n">kll_val</span><span class="p">][</span><span class="s1">&#39;profile_bars&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">profile_mean</span>
            <span class="n">kll_bars</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">][</span><span class="n">kll_val</span><span class="p">][</span><span class="s1">&#39;sample_bars&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample_mean</span>
            <span class="n">kll_bars</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">][</span><span class="n">kll_val</span><span class="p">][</span><span class="s1">&#39;profile_yerr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">range_profile_errors</span>
            <span class="n">kll_bars</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">][</span><span class="n">kll_val</span><span class="p">][</span><span class="s1">&#39;sample_yerr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">range_sample_errors</span>
            <span class="n">kll_bars</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">][</span><span class="n">kll_val</span><span class="p">][</span><span class="s1">&#39;distribution&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">distribution</span>
    <span class="k">return</span> <span class="n">kll_bars</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">def</span> <span class="nf">plot_kll_experiment</span><span class="p">(</span><span class="n">bars_per_kll_per_drift</span><span class="p">,</span> <span class="n">include_sampling</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plots kll experiments for different magnitudes (expects 4).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    bars_per_kll_per_drift : dict</span>
<span class="sd">        KLL Experiment results.</span>
<span class="sd">    include_sampling : bool, optional</span>
<span class="sd">        If false, plots only errors for the profiling case, by default True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc_file_defaults</span><span class="p">()</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
    <span class="n">barWidth</span> <span class="o">=</span> <span class="mf">0.17</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">drift_magnitude</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bars_per_kll_per_drift</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="k">2</span>),int(i/2)
        <span class="n">bars_per_kll</span> <span class="o">=</span> <span class="n">bars_per_kll_per_drift</span><span class="p">[</span><span class="n">drift_magnitude</span><span class="p">]</span>
        <span class="n">profile_bars</span> <span class="o">=</span> <span class="p">[</span><span class="n">bars_per_kll</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;profile_bars&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">bars_per_kll</span><span class="p">]</span>
        <span class="n">sample_bars</span> <span class="o">=</span> <span class="p">[</span><span class="n">bars_per_kll</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;sample_bars&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">bars_per_kll</span><span class="p">]</span>

        <span class="n">profile_error</span> <span class="o">=</span> <span class="p">[[</span><span class="n">bars_per_kll</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;profile_yerr&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">bars_per_kll</span><span class="p">],[</span><span class="n">bars_per_kll</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;profile_yerr&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">bars_per_kll</span><span class="p">]]</span>
        <span class="n">size_kb</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> KB&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bars_per_kll</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;size_kb&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">bars_per_kll</span><span class="p">]</span>

        <span class="n">r1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">profile_bars</span><span class="p">))</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="n">barWidth</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">include_sampling</span><span class="p">:</span>
            <span class="n">sample_error</span> <span class="o">=</span> <span class="p">[[</span><span class="n">bars_per_kll</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;sample_yerr&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">bars_per_kll</span><span class="p">],[</span><span class="n">bars_per_kll</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;sample_yerr&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">bars_per_kll</span><span class="p">]]</span>
            <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">sample_bars</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:blue&#39;</span><span class="p">,</span> <span class="n">yerr</span> <span class="o">=</span> <span class="n">sample_error</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">barWidth</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sampled&#39;</span><span class="p">)</span>
            <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="o">*</span><span class="n">barWidth</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">profile_bars</span><span class="p">))],</span> <span class="n">size_kb</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">profile_bars</span><span class="p">))],</span> <span class="n">size_kb</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">profile_bars</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:orange&#39;</span><span class="p">,</span> <span class="n">yerr</span> <span class="o">=</span> <span class="n">profile_error</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">barWidth</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Profiled&#39;</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Drift Size:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">drift_magnitude</span><span class="p">))</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">first_key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">bars_per_kll</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">include_sampling</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="s2">&quot;KS pvalue mean abs. error comparison between profiling and sampling. </span><span class="si">{}</span><span class="s2"> distribution. Sample size = 100 000.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bars_per_kll</span><span class="p">[</span><span class="n">first_key</span><span class="p">][</span><span class="s1">&#39;distribution&#39;</span><span class="p">]),</span>  <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="s2">&quot;KS pvalue mean abs. error for profiling. </span><span class="si">{}</span><span class="s2"> distribution. Sample size = 100 000.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bars_per_kll</span><span class="p">[</span><span class="n">first_key</span><span class="p">][</span><span class="s1">&#39;distribution&#39;</span><span class="p">]),</span>  <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</section>
<section id="Normal-Distribution">
<h2>Normal Distribution<a class="headerlink" href="#Normal-Distribution" title="Permalink to this headline">#</a></h2>
<section id="id1">
<h3>Drift Injection<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_drift</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span> <span class="n">magnitudes</span><span class="o">=</span><span class="n">drift_magnitudes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_26_0.png" src="../../_images/examples_benchmarks_KS_Profiling_26_0.png" />
</div>
</div>
</section>
<section id="Running-the-Experiment">
<h3>Running the Experiment<a class="headerlink" href="#Running-the-Experiment" title="Permalink to this headline">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quant_bars_per_drift</span> <span class="o">=</span> <span class="n">run_experiment_on_params</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span><span class="n">magnitudes</span> <span class="o">=</span> <span class="n">drift_magnitudes</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Experiment-#1---Data-Volume">
<h3>Experiment #1 - Data Volume<a class="headerlink" href="#Experiment-#1---Data-Volume" title="Permalink to this headline">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_pvalues</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_30_0.png" src="../../_images/examples_benchmarks_KS_Profiling_30_0.png" />
</div>
</div>
</section>
<section id="Experiment-#2---No. of-Buckets">
<h3>Experiment #2 - No. of Buckets<a class="headerlink" href="#Experiment-#2---No. of-Buckets" title="Permalink to this headline">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_buckets_experiment</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_32_0.png" src="../../_images/examples_benchmarks_KS_Profiling_32_0.png" />
</div>
</div>
<ul class="simple">
<li><p>sensitive enough to get very small drift magnitude</p></li>
<li><p>overall trend the same, ground truth pretty much within profiling empirical error bounds</p></li>
<li><p>all but one point would yield the same result (drift/no-drift)</p></li>
<li><p>last point for no drift is arguably wrong, as there’s no drift</p></li>
<li><p>oddly enough, even though whylogs is further from the ground truth, it is closer to the expected value, which is no drift (for the first case)</p></li>
</ul>
</section>
<section id="Experiment-#3---Profile-Size">
<h3>Experiment #3 - Profile Size<a class="headerlink" href="#Experiment-#3---Profile-Size" title="Permalink to this headline">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kll_bars</span> <span class="o">=</span> <span class="n">run_kll_experiment</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span><span class="n">magnitudes</span><span class="o">=</span><span class="n">drift_magnitudes</span><span class="p">,</span> <span class="n">kllSizeMap</span><span class="o">=</span><span class="n">kllSizeMap</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_kll_experiment</span><span class="p">(</span><span class="n">kll_bars</span><span class="p">,</span> <span class="n">include_sampling</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_36_0.png" src="../../_images/examples_benchmarks_KS_Profiling_36_0.png" />
</div>
</div>
<ul class="simple">
<li><p>Error inversely proportional to Profile Size: By increasing the profile size, the errors due to profiling decreases, and it gets closer to the standard approach.</p></li>
<li><p>again, KS is so sensitive that when any drift is present, both approaches go directly to 0</p></li>
</ul>
</section>
</section>
<section id="Pareto-Distribution">
<h2>Pareto Distribution<a class="headerlink" href="#Pareto-Distribution" title="Permalink to this headline">#</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_drift</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;pareto&quot;</span><span class="p">,</span> <span class="n">magnitudes</span><span class="o">=</span><span class="n">drift_magnitudes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_39_0.png" src="../../_images/examples_benchmarks_KS_Profiling_39_0.png" />
</div>
</div>
<section id="Running-the-Experiments">
<h3>Running the Experiments<a class="headerlink" href="#Running-the-Experiments" title="Permalink to this headline">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quant_bars_per_drift</span> <span class="o">=</span> <span class="n">run_experiment_on_params</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;pareto&quot;</span><span class="p">,</span><span class="n">magnitudes</span> <span class="o">=</span> <span class="n">drift_magnitudes</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="id2">
<h3>Experiment #1 - Data Volume<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_pvalues</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_43_0.png" src="../../_images/examples_benchmarks_KS_Profiling_43_0.png" />
</div>
</div>
</section>
<section id="id3">
<h3>Experiment #2 - No. of Buckets<a class="headerlink" href="#id3" title="Permalink to this headline">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_buckets_experiment</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_45_0.png" src="../../_images/examples_benchmarks_KS_Profiling_45_0.png" />
</div>
</div>
</section>
<section id="id4">
<h3>Experiment #3 - Profile Size<a class="headerlink" href="#id4" title="Permalink to this headline">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kll_bars</span> <span class="o">=</span> <span class="n">run_kll_experiment</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;pareto&quot;</span><span class="p">,</span><span class="n">magnitudes</span><span class="o">=</span><span class="n">drift_magnitudes</span><span class="p">,</span> <span class="n">kllSizeMap</span><span class="o">=</span><span class="n">kllSizeMap</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_kll_experiment</span><span class="p">(</span><span class="n">kll_bars</span><span class="p">,</span> <span class="n">include_sampling</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_48_0.png" src="../../_images/examples_benchmarks_KS_Profiling_48_0.png" />
</div>
</div>
</section>
</section>
<section id="Uniform-Distribution">
<h2>Uniform Distribution<a class="headerlink" href="#Uniform-Distribution" title="Permalink to this headline">#</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_drift</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;uniform&quot;</span><span class="p">,</span> <span class="n">magnitudes</span><span class="o">=</span><span class="n">drift_magnitudes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_50_0.png" src="../../_images/examples_benchmarks_KS_Profiling_50_0.png" />
</div>
</div>
<section id="id5">
<h3>Running the Experiment<a class="headerlink" href="#id5" title="Permalink to this headline">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quant_bars_per_drift</span> <span class="o">=</span> <span class="n">run_experiment_on_params</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;uniform&quot;</span><span class="p">,</span><span class="n">magnitudes</span> <span class="o">=</span> <span class="n">drift_magnitudes</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="id6">
<h3>Experiment #1 - Data Volume<a class="headerlink" href="#id6" title="Permalink to this headline">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_pvalues</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_54_0.png" src="../../_images/examples_benchmarks_KS_Profiling_54_0.png" />
</div>
</div>
</section>
<section id="Experiment-#2---No. of-buckets">
<h3>Experiment #2 - No. of buckets<a class="headerlink" href="#Experiment-#2---No. of-buckets" title="Permalink to this headline">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_buckets_experiment</span><span class="p">(</span><span class="n">quant_bars_per_drift</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_56_0.png" src="../../_images/examples_benchmarks_KS_Profiling_56_0.png" />
</div>
</div>
</section>
<section id="id8">
<h3>Experiment #3 - Profile Size<a class="headerlink" href="#id8" title="Permalink to this headline">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kll_bars</span> <span class="o">=</span> <span class="n">run_kll_experiment</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;uniform&quot;</span><span class="p">,</span><span class="n">magnitudes</span><span class="o">=</span><span class="n">drift_magnitudes</span><span class="p">,</span> <span class="n">kllSizeMap</span><span class="o">=</span><span class="n">kllSizeMap</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_kll_experiment</span><span class="p">(</span><span class="n">kll_bars</span><span class="p">,</span> <span class="n">include_sampling</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_benchmarks_KS_Profiling_59_0.png" src="../../_images/examples_benchmarks_KS_Profiling_59_0.png" />
</div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, whylogs developers
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://bit.ly/whylogs-slack" aria-label="Slack">
            <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512"><path d="M213.6
            236.216l64.003-21.438 20.708 61.823-64.004
            21.438z"></path><path d="M213.6 236.216l64.003-21.438 20.708 61.823-64.004 21.438z"></path><path
            d="M475.9 190C426.4 25 355-13.4 190 36.1S-13.4 157 36.1 322 157 525.4 322 475.9 525.4 355 475.9
            190zm-83.3 107.1l-31.1 10.4 10.7 32.2c4.2 13-2.7 27.2-15.7 31.5-2.7.8-5.8 1.5-8.4
            1.2-10-.4-19.6-6.9-23-16.9l-10.7-32.2-64.1 21.5L261 377c4.2 13-2.7 27.2-15.7 31.5-2.7.8-5.8 1.5-8.4
            1.2-10-.4-19.6-6.9-23-16.9L203 360.4l-31 10.3c-2.7.8-5.8 1.5-8.4 1.2-10-.4-19.6-6.9-23-16.9-4.2-13
            2.7-27.2 15.7-31.5l31.1-10.4-20.7-61.8-31.1 10.4c-2.7.8-5.8 1.5-8.4 1.2-10-.4-19.6-6.9-23-16.9-4.2-13
            2.7-27.2 15.7-31.5l31.1-10.4-10.9-32.1c-4.2-13 2.7-27.2 15.7-31.5 13-4.2 27.2 2.7 31.5 15.7l10.7 32.2
            64.1-21.5-10.7-32.2c-4.2-13 2.7-27.2 15.7-31.5 13-4.2 27.2 2.7 31.5 15.7l10.7 32.2 31.1-10.4c13-4.2 27.2
            2.7 31.5 15.7 4.2 13-2.7 27.2-15.7 31.5l-31.1 10.4 20.7 61.8 31.1-10.4c13-4.2 27.2 2.7 31.5 15.7 4.2
            13.2-2.7 27.4-15.8 31.7z"></path></svg>
            </a>
              <a class="muted-link " href="https://github.com/whylabs/whylogs" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38
                    0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53
                    .63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95
                    0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0
                    1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87
                    3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16
                    8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Benchmark - KS Test</a><ul>
<li><a class="reference internal" href="#Experiment-Design">Experiment Design</a><ul>
<li><a class="reference internal" href="#Drift-Injection">Drift Injection</a></li>
<li><a class="reference internal" href="#Applying-the-KS-test">Applying the KS test</a></li>
<li><a class="reference internal" href="#Experiment-Variables">Experiment Variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Installing-the-required-packages">Installing the required packages</a></li>
<li><a class="reference internal" href="#Parameters-and-Functions---Experiments-and-Plots">Parameters and Functions - Experiments and Plots</a></li>
<li><a class="reference internal" href="#Normal-Distribution">Normal Distribution</a><ul>
<li><a class="reference internal" href="#id1">Drift Injection</a></li>
<li><a class="reference internal" href="#Running-the-Experiment">Running the Experiment</a></li>
<li><a class="reference internal" href="#Experiment-#1---Data-Volume">Experiment #1 - Data Volume</a></li>
<li><a class="reference internal" href="#Experiment-#2---No. of-Buckets">Experiment #2 - No. of Buckets</a></li>
<li><a class="reference internal" href="#Experiment-#3---Profile-Size">Experiment #3 - Profile Size</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Pareto-Distribution">Pareto Distribution</a><ul>
<li><a class="reference internal" href="#Running-the-Experiments">Running the Experiments</a></li>
<li><a class="reference internal" href="#id2">Experiment #1 - Data Volume</a></li>
<li><a class="reference internal" href="#id3">Experiment #2 - No. of Buckets</a></li>
<li><a class="reference internal" href="#id4">Experiment #3 - Profile Size</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Uniform-Distribution">Uniform Distribution</a><ul>
<li><a class="reference internal" href="#id5">Running the Experiment</a></li>
<li><a class="reference internal" href="#id6">Experiment #1 - Data Volume</a></li>
<li><a class="reference internal" href="#Experiment-#2---No. of-buckets">Experiment #2 - No. of buckets</a></li>
<li><a class="reference internal" href="#id8">Experiment #3 - Profile Size</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    </body>
</html>